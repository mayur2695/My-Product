@isTest
public class GYNC_CreationEndpoint_Test {
  
    @testSetup static void setup() {
        GYNCS_AuthorizationSetting__c sysId = GYNC_TestUtility.createAuthorizationSetting('Default',true);
        string sysmId = string.valueOf(sysId.Id);
        string ServiceURL = 'http://ec2-18-215-72-123.compute-1.amazonaws.com:8080/sap/opu/odata/GCONNECT/SF_CUSTOMER_SRV/CUSTOMERSet';
        string FieldMapping = '[{"sapField":"Name1","SFDCField":"{\"sfdcFieldType\":\"STRING\",\"relatedTo\":\"Account\",\"fieldValue\":\"Name\"}"},{"sapField":"Customer","SFDCField":"{\"sfdcFieldType\":\"STRING\",\"relatedTo\":\"DandBCompany\",\"fieldValue\":\"GYNCF_SAP_Number__c\"}"},{"sapField":"City","SFDCField":"{\"sfdcFieldType\":\"STRING\",\"relatedTo\":\"Account\",\"fieldValue\":\"BillingCity\"}"},{"sapField":"Country","SFDCField":"{\"sfdcFieldType\":\"STRING\",\"relatedTo\":\"Account\",\"fieldValue\":\"BillingCountry\"}"},{"sapField":"PostalCode","SFDCField":"{\"sfdcFieldType\":\"STRING\",\"relatedTo\":\"Account\",\"fieldValue\":\"BillingPostalCode\"}"},{"sapField":"Region","SFDCField":"{\"sfdcFieldType\":\"STRING\",\"relatedTo\":\"Account\",\"fieldValue\":\"BillingState\"}"},{"sapField":"Street","SFDCField":"{\"sfdcFieldType\":\"TEXTAREA\",\"relatedTo\":\"Account\",\"fieldValue\":\"BillingStreet\"}"},{"sapField":"Telephone","SFDCField":"{\"sfdcFieldType\":\"PHONE\",\"relatedTo\":\"Account\",\"fieldValue\":\"Phone\"}"},{"sapField":"Industry","SFDCField":"{\"sfdcFieldType\":\"PICKLIST\",\"relatedTo\":\"Account\",\"fieldValue\":\"Industry\"}"},{"sapField":"UriAddress","SFDCField":"{\"sfdcFieldType\":\"URL\",\"relatedTo\":\"Account\",\"fieldValue\":\"Website\"}"},{"sapField":"DeletionIndicator","SFDCField":"{\"sfdcFieldType\":\"BOOLEAN\",\"relatedTo\":\"DandBCompany\",\"fieldValue\":\"GYNCF_Active__c\"}"},{"sapField":"Name2","SFDCField":"{\"sfdcFieldType\":\"STRING\",\"relatedTo\":\"DandBCompany\",\"fieldValue\":\"GYNCF_Name2__c\"}"},{"sapField":"CreatedDate","SFDCField":"{\"sfdcFieldType\":\"DATETIME\",\"relatedTo\":\"DandBCompany\",\"fieldValue\":\"GYNCF_SAP_Created_Date__c\"}","Type":"","RelatedTo":""},{"sapField":"AccountGroup","SFDCField":"{\"sfdcFieldType\":\"STRING\",\"relatedTo\":\"DandBCompany\",\"fieldValue\":\"GYNCF_AccountGroup__c\"}"},{"sapField":"Name1","SFDCField":"{\"sfdcFieldType\":\"STRING\",\"relatedTo\":\"Account\",\"fieldValue\":\"Name\"}"},{"sapField":"Customer","SFDCField":"{\"sfdcFieldType\":\"STRING\",\"relatedTo\":\"DandBCompany\",\"fieldValue\":\"GYNCF_SAP_Number__c\"}"},{"sapField":"City","SFDCField":"{\"sfdcFieldType\":\"STRING\",\"relatedTo\":\"Account\",\"fieldValue\":\"BillingCity\"}"},{"sapField":"PostalCode","SFDCField":"{\"sfdcFieldType\":\"STRING\",\"relatedTo\":\"Account\",\"fieldValue\":\"BillingPostalCode\"}"},{"sapField":"Street","SFDCField":"{\"sfdcFieldType\":\"TEXTAREA\",\"relatedTo\":\"Account\",\"fieldValue\":\"BillingStreet\"}"},{"sapField":"Telephone","SFDCField":"{\"sfdcFieldType\":\"PHONE\",\"relatedTo\":\"Account\",\"fieldValue\":\"Phone\"}"},{"sapField":"Industry","SFDCField":"{\"sfdcFieldType\":\"PICKLIST\",\"relatedTo\":\"Account\",\"fieldValue\":\"Industry\"}"},{"sapField":"UriAddress","SFDCField":"{\"sfdcFieldType\":\"URL\",\"relatedTo\":\"Account\",\"fieldValue\":\"Website\"}"},{"sapField":"Name1","SFDCField":"{\"sfdcFieldType\":\"STRING\",\"relatedTo\":\"Account\",\"fieldValue\":\"Name\"}"},{"sapField":"Customer","SFDCField":"{\"sfdcFieldType\":\"STRING\",\"relatedTo\":\"DandBCompany\",\"fieldValue\":\"GYNCF_SAP_Number__c\"}"},{"sapField":"City","SFDCField":"{\"sfdcFieldType\":\"STRING\",\"relatedTo\":\"Account\",\"fieldValue\":\"BillingCity\"}"},{"sapField":"Country","SFDCField":"{\"sfdcFieldType\":\"STRING\",\"relatedTo\":\"Account\",\"fieldValue\":\"BillingCountry\"}"},{"sapField":"PostalCode","SFDCField":"{\"sfdcFieldType\":\"STRING\",\"relatedTo\":\"Account\",\"fieldValue\":\"BillingPostalCode\"}"},{"sapField":"Region","SFDCField":"{\"sfdcFieldType\":\"STRING\",\"relatedTo\":\"Account\",\"fieldValue\":\"BillingState\"}"},{"sapField":"Street","SFDCField":"{\"sfdcFieldType\":\"TEXTAREA\",\"relatedTo\":\"Account\",\"fieldValue\":\"BillingStreet\"}"},{"sapField":"Telephone","SFDCField":"{\"sfdcFieldType\":\"PHONE\",\"relatedTo\":\"Account\",\"fieldValue\":\"Phone\"}"},{"sapField":"Industry","SFDCField":"{\"sfdcFieldType\":\"PICKLIST\",\"relatedTo\":\"Account\",\"fieldValue\":\"Industry\"}"},{"sapField":"UriAddress","SFDCField":"{\"sfdcFieldType\":\"URL\",\"relatedTo\":\"Account\",\"fieldValue\":\"Website\"}"},{"sapField":"DeletionIndicator","SFDCField":"{\"sfdcFieldType\":\"BOOLEAN\",\"relatedTo\":\"DandBCompany\",\"fieldValue\":\"GYNCF_Active__c\"}"},{"sapField":"Name2","SFDCField":"{\"sfdcFieldType\":\"STRING\",\"relatedTo\":\"DandBCompany\",\"fieldValue\":\"GYNCF_Name2__c\"}"},{"sapField":"CreatedDate","SFDCField":"{\"sfdcFieldType\":\"DATETIME\",\"relatedTo\":\"DandBCompany\",\"fieldValue\":\"GYNCF_SAP_Created_Date__c\"}","Type":"","RelatedTo":""},{"sapField":"AccountGroup","SFDCField":"{\"sfdcFieldType\":\"STRING\",\"relatedTo\":\"DandBCompany\",\"fieldValue\":\"GYNCF_AccountGroup__c\"}"},{"sapField":"Name1","SFDCField":"{\"sfdcFieldType\":\"STRING\",\"relatedTo\":\"Account\",\"fieldValue\":\"Name\"}"},{"sapField":"Customer","SFDCField":"{\"sfdcFieldType\":\"STRING\",\"relatedTo\":\"DandBCompany\",\"fieldValue\":\"GYNCF_SAP_Number__c\"}"},{"sapField":"City","SFDCField":"{\"sfdcFieldType\":\"STRING\",\"relatedTo\":\"Account\",\"fieldValue\":\"BillingCity\"}"},{"sapField":"PostalCode","SFDCField":"{\"sfdcFieldType\":\"STRING\",\"relatedTo\":\"Account\",\"fieldValue\":\"BillingPostalCode\"}"},{"sapField":"Street","SFDCField":"{\"sfdcFieldType\":\"TEXTAREA\",\"relatedTo\":\"Account\",\"fieldValue\":\"BillingStreet\"}"},{"sapField":"Telephone","SFDCField":"{\"sfdcFieldType\":\"PHONE\",\"relatedTo\":\"Account\",\"fieldValue\":\"Phone\"}"},{"sapField":"Industry","SFDCField":"{\"sfdcFieldType\":\"PICKLIST\",\"relatedTo\":\"Account\",\"fieldValue\":\"Industry\"}"},{"sapField":"UriAddress","SFDCField":"{\"sfdcFieldType\":\"URL\",\"relatedTo\":\"Account\",\"fieldValue\":\"Website\"}"}]';
        string Filters = '[{"configApiName": "GYNCF_Billing_End_Date__c","sapApiName": "BillingDate"},{"configApiName": "GYNCF_Billing_Start_Date__c","sapApiName": "BillingDate"},{"configApiName": "GYNCF_Date_Range_From__c","sapApiName": "CreationDate"},{"configApiName": "GYNCF_Date_Range_To__c","sapApiName": "CreationDate"},{"configApiName": "GYNCF_Archived__c","sapApiName": "DeletionIndicator","type": "Boolean"},{"configApiName": "Sync_Only_DELTA__c","sapApiName": "Delta","type": "DeltaSync"},{"configApiName": "GYNCF_Last_Synced__c","sapApiName": "Lastrundate","type": "DeltaSync"},{"configApiName": "GYNCF_Sales_Org__c","sapApiName": "SalesOrganization"},{"configApiName": "GYNCF_Billing_Type__c","sapApiName": "BillingType"},{"configApiName": "GYNCF_Company_Code__c","sapApiName": "CompanyCode"},{"configApiName": "GYNCF_Fiscal_Year__c","sapApiName": "FiscalYear"}]';
        Double BatchSize = 2000;
        integer Count = 1;
        Boolean doInsert = true;
        string SAPObjectName = 'Customer';
        string SFDCObjectName = 'Account';
        list<GYNCO_Configuration__c> config = GYNC_TestUtility.createConfiguration(SAPObjectName, sysmId, SFDCObjectName, ServiceURL, FieldMapping, Filters, BatchSize, Count, doInsert);
        //GYNCO_Configuration__c conf = new GYNCO_Configuration__c();
        system.debug('config'+config);
        config[0].GYNCF_Date_Range_From__c = Date.today();
        config[0].GYNCF_Date_Range_To__c  =  Date.today();
        config[0].GYNCF_Billing_End_Date__c= Date.today();
        config[0].GYNCF_Billing_Start_Date__c = Date.today();
        config[0].GYNCF_Archived__c   =true;
        config[0].Sync_Only_DELTA__c  = true;
        config[0].GYNCF_Last_Synced__c = system.now();
        //
        update config[0];
        system.debug('config'+config[0]);
       
    }
    @isTest static void testMethod1() {
        //perform query to get the data from the setup
        GYNCO_Configuration__c ConfigRec = [SELECT Id, Name,GYNCF_Date_Range_From__c,GYNCF_Date_Range_To__c,GYNCF_Fiscal_Year__c,GYNCF_Company_Code__c,GYNCF_Document_Type__c,GYNCF_Billing_Type__c,GYNCF_Document_Status__c,GYNCF_Available_Fileters__c, GYNCF_SFDC_Object_Name__c, GYNCF_Field_Maping__c, GYNCF_Service_URL__c, 
                            GYNCF_Identifier_SFDC__c, GYNCF_Identifier_SAP__c,GYNCF_Batch_Size__c, GYNCF_To_Be_Synced__c,GYNCF_Account_Group__c, GYNCF_Sales_Org__c, GYNCF_Distribution_Channel__c, GYNCF_LineItemApi_Name__c,
                     		GYNCF_Division__c, GYNCF_Archived__c,GYNCF_Material_Group__c,GYNCF_Material_Type__c,GYNCF_Billing_Start_Date__c,GYNCF_Billing_End_Date__c,GYNCF_SalesOrder_Quote_Filter__c, GYNCF_PricebookApi_Name__c,
                			GYNCF_LineItem_Identifier_SAP__c, GYNCF_LineItem_Identifier_SFDC__c, GYNCF_Default_Order_Status__c, GYNCF_Default_Quote_Opportunity__c, GYNCF_LineItem_ParentField_Api__c, GYNCF_PricebookEntry_Field_API_Name__c,
                			Sync_Only_DELTA__c, GYNCF_Last_Synced__c,GYNCF_System_Status__c, GYNCF_Mass_Sync_Live__c, GYNCF_isFLSActive__c
                            FROM GYNCO_Configuration__c];
            //[select id,Name,GYNCF_System_Id__c,GYNCF_Service_URL__c,GYNCF_Available_Fileters__c,GYNCF_Date_Range_From__c,GYNCF_Date_Range_To__c,Sync_Only_DELTA__c,GYNCF_Last_Synced__c,GYNCF_Billing_Start_Date__c,GYNCF_Billing_End_Date__c,GYNCF_Archived__c,GYNCF_Sales_Org__c from GYNCO_Configuration__c];
        Test.startTest();
        //perform the logic to test the appropriate class
        GYNC_CreationEndpoint.EndPoint(ConfigRec,0,0,true);
        Test.stopTest();
        string assertValue = string.valueof(ConfigRec.GYNCF_Service_URL__c);
        // Perform System.assert
        System.assertEquals('http://ec2-18-215-72-123.compute-1.amazonaws.com:8080/sap/opu/odata/GCONNECT/SF_CUSTOMER_SRV/CUSTOMERSet',assertValue);
    }
    
}